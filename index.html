<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>

.modal {
  display: none;
  position: fixed;
  padding-top: 50px;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgb(0, 0, 0);
  background-color: rgba(0, 0, 0, 0.5);
}
.modal-content {
  position: relative;
  background-color: white;
  padding: 20px;
  margin: auto;
  width: 75%;
  -webkit-animation-name: animatetop;
  -webkit-animation-duration: 0.4s;
  animation-name: animatetop;
  animation-duration: 0.4s
}
.close-btn {
  position: absolute;
  top: 8px;
  right: 16px;
  font-weight: bold;
  font-size: 34px;
}
.close-btn:hover {
  color: darkgray;
}
@-webkit-keyframes animatetop {
  from {top:-300px; opacity:0}
  to {top:0; opacity:1}
}
@keyframes animatetop {
  from {top:-300px; opacity:0}
  to {top:0; opacity:1}
}

body{
    font-size: 15px;

    color: #333;
}
.question{
    font-weight: 600;
}
.answers {
  margin-bottom: 20px;
}
.answers label{
  display: block;
}
#submit{

    font-size: 20px;
    background-color: #279;
    color: #fff;
    border: 0px;
    border-radius: 3px;
    padding: 20px;

    margin-bottom: 20px;
}
#submit:hover{
    background-color: #38a;
}

</style>
</head>
<body style="text-align:center">

<button id="modal-btn"> click me, I make a modal</button>



<div class="modal">
  <div class="modal-content">
    <div class="close-btn">&times;</div>
    <div id="quiz"></div>
  <button id="submit">Submit Quiz</button>
  <div id="results"></div>
  </div>
</div>

<script>
let modalBtn = document.getElementById("modal-btn")
let modal = document.querySelector(".modal")
let closeBtn = document.querySelector(".close-btn")
modalBtn.onclick = function(){
  modal.style.display = "block";
  buildQuiz();
}
closeBtn.onclick = function(){
  modal.style.display = "none"
}
window.onclick = function(e){
  if(e.target == modal){
    modal.style.display = "none"
  }
}

const quizContainer = document.getElementById('quiz');
const resultsContainer = document.getElementById('results');
const submitButton = document.getElementById('submit');

const myQuestions = [
  {
    question: "How many books do you read per year?",
    answers: {
      a: "2-5",
      b: "5-10",
      c: "10-20",
      d: ">20"
    },
    scores: {
      a: 1,
      b: 2,
      c: 3,
      d: 4
    }
  },
  {
    question: "How often do you read meaningful articles?",
    answers: {
      a: "Every day",
      b: "Couple times a week",
      c: "Couple times a month",
      d: "Very rarely"
    },
    scores: {
      a: 3,
      b: 2,
      c: 1,
      d: 0
    }
  },
  {
    question: "How many courses do you do per year?",
    answers: {
      a: "Never do it",
      b: "About 2 per year",
      c: "Once a year"

    },
    scores: {
      a: 0,
      b: 1,
      c: 2
    }
  },
  {
    question: "Do you listen to podcasts?",
    answers: {
      a: "Yes",
      b: "No"

    },
    scores: {
      a: 1,
      b: 0
    }
  },
  {
    question: "Do you watch educational videos?",
    answers: {
      a: "Yes, couple times a week",
      b: "Couple times a month",
      c: "Not really"

    },
    scores: {
      a: 3,
      b: 2,
      c: 0
    }
  },
  {
    question: "Do you make notes while reading?",
    answers: {
      a: "Almost always",
      b: "Sometimes",
      c: "Never"

    },
    scores: {
      a: 3,
      b: 2,
      c: 1
    }
  }
];

function buildQuiz(){
  // we'll need a place to store the HTML output
  const output = [];

  // for each question...
  myQuestions.forEach(
    (currentQuestion, questionNumber) => {

      // we'll want to store the list of answer choices
      const answers = [];

      // and for each available answer...
      for(letter in currentQuestion.answers){

        // ...add an HTML radio button
        answers.push(
          `<label>
            <input type="radio" name="question${questionNumber}" value="${letter}">
            ${letter} :
            ${currentQuestion.answers[letter]}
          </label>`
        );
      }

      // add this question and its answers to the output
      output.push(
        `<div class="question"> ${currentQuestion.question} </div>
        <div class="answers"> ${answers.join('')} </div>`
      );
    }
  );

  // finally combine our output list into one string of HTML and put it on the page
  quizContainer.innerHTML = output.join('');
  resultsContainer.innerHTML = '';
}

function showResults(){

  // gather answer containers from our quiz
  const answerContainers = quizContainer.querySelectorAll('.answers');

  // keep track of user's answers
  let numCorrect = 0;
  let totalScore = 0;

  // for each question...
  myQuestions.forEach( (currentQuestion, questionNumber) => {

    // find selected answer
    const answerContainer = answerContainers[questionNumber];
    const selector = 'input[name=question'+questionNumber+']:checked';
    const userAnswer = (answerContainer.querySelector(selector) || {}).value;

    // if answer is correct
    thisScore = currentQuestion.scores[userAnswer] || 0;
    totalScore+=thisScore;

  });

  // show number of correct answers out of total
  resultsContainer.innerHTML = 'Your score is ' + totalScore;
}

submitButton.addEventListener("click", showResults);

</script>

</body>
</html>
